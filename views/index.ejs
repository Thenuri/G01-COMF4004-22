<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/css/syntax1.css">
    <link rel="stylesheet" type="text/css" href="/css/commonstyles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>
<body>
    <div>
        <header>
            

  
            <!--nav bar-->
            <nav class="navbar fixed-top navbar-expand-lg navbar-dark p-md-3">
                <div class="container">
                    <a href="/" class="navbar-brand text-white fs-1 fw-bold">Book My Bus</a>
                    <button type="button"class="navbar-toggler bottom-"data-bs-target="#navbarNav"data-bs-toggle="collapse"aria-controls="navbarNav"aria-expanded="false"aria-label="Toggle Navbar">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <div class="mx-auto"></div>
                        <ul class="navbar-nav fs-5">
                            <li class="nav-item mx-4 my-auto"><a href="/vehicle" class="nav-link text-white">Book Now</a></li>
                            <li class="nav-item mx-4 my-auto"><a href="/#aboutUs" class="nav-link text-white">About Us</a></li>
                            <li class="nav-item mx-4 my-auto"><a href="/#ContactUs" class="nav-link text-white">Contact Us</a></li>
                            <%- include('partials/navBarProfileOrSignIn')  %> 
                        </ul>
                    </div>
                </div>
            </nav>
            <!--main image-->
            <div class="banner vw-100 vh-100   justify-content-center align-items-center">
                <div class="content text-right ">
                    <h1 class=" text-white   display-1   fw-bold  "  id="h1text" >Book A Bus <br>with Ease</h1>
                </div>
            </div>
        </header>
    </div>
   
    
    <h3 class="heading"> Top Rated Buses</h3>
    <div id="marks">
     
    </div>
    <div id="row">
        <div class="container" id="container">
            <div class="container" >
                <div class="row">
                    <div class="col-sm" id="col">
                        Do you want to rent your <br> bus? Sign up now!
                        <br><br>
                        <p id="row1">Are you are a bus owner , regiser your for free right now!<br> you will start grading for yourservices by the clients.<br> Create your profile page with fleet information <br>and pictures of the vehicle</p>
                        <a href="/managebus"><button type="button" class="btn" id="btn">Add Bus</button></a>
                    </div>
                    <div class="col-sm">
                        <br><br>
                        <img src="/images/AddBus.jpg" id="align1" >
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br><br>
    <div class="container" id="aboutUs">
        <div class="row">
            <div class="col-sm">
                <img src="/images/pexels-photo-3811082.jpeg" id="align2" >
            </div>
            <div class="col-sm">
               <h3 class="heading1">About Us</h3>
               <br><br>
               <p id="row1">our site facilitates easy booking for  travelling for groups. And also bus owners can advertise there vehicles free of charge . for clients we provide vehicle rating system where they could find previous comments and experience of passengers travelled in each vehicle .we have customize our website according to every category of requirements of  costumers where they can get optimum selection variety </p>
            </div>
        </div>
    </div>
    <br><br>
    <div id="row">
        <div class="container" id="container">
            <div class="container" >
                <div class="row" id="ContactUs">
                    <div class="col-sm" id="col">
                        Contact Us
                        <p id="row1">info@bookmybus.com<br>0778454692</p>   
                     </div>
                </div>
            </div>
        </div>
    </div>
    <br><br>
    
    <footer>
        <p class="copyright">
             &copy;  2022 Book My Bus. 
        </p>
    </footer>


    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

    <script>

    // const signoutBtn = document.getElementById('sign-out');
    // signoutBtn.addEventListener('click', signout);

    // function signout(){
    //     fetch('/signout', {
    //         method: 'POST',
    //         credentials: 'include', // include cookies in the request
    //     })
    //     .then(response => {
    //         if (response.ok) { // sign out successful, redirect to login page
    //             window.location.href = '/signin';
    //         } else { // sign out failed, display error message
    //             alert('Sign out failed');
    //         }
    //     })
    //     .catch(error => {
    //         console.log(error);
    //     });
    // }


        let navbar = document.querySelector('nav');
        window.addEventListener('scroll',scroll)

        function scroll(){
            if(window.pageYOffset>100){
            //   navbar.classList.add('bg-primary','shadow');  
              navbar.classList.add('bg-dark-blue-theme','shadow');  

            }else{
                navbar.classList.remove('bg-dark-blue-theme','shadow');
            }
        }
       
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
       document.addEventListener("DOMContentLoaded",viewrating ) 

        /* choosing  top trending buses according to top ratings */
       function viewrating(){
        let rating = document.getElementById("marks")
        rating.innerHTML = ""
        axios.get('http://localhost:3000/vehicle/vrating')
        .then((res) => {
            views = res.data // getting data from the DB
            console.log(views)
            views.forEach(bus =>{ // Displaying bus card for each bus
                let ratingStarsHTML ="";
                for (let i = 0; i < 5; i++) {

                    if ( i < Math.floor(bus.Rating)) {
                        ratingStarsHTML += `<span class="fa fa-star"></span>`
                    } else  {
                        ratingStarsHTML += `<span class="fa fa-star-o"></span>`
                    }
                }
                
            ratingCard = `<div class="containers">
            <div class="card">
                <div class="imgbox">
                    <img src="${bus.Bus_Image}" alt="bus">
                </div>
                <div class="contents">
                    <h2><img src="/images/ic_airline_seat_recline_extra_24px.svg"  style="width:25px; height:50px; margin-top:-5px;color:#240A6B;">${bus.No_Of_Seats}</h2>
                    <h4 class="end-text">LKR/KM-${bus.Price_Per_km}</h4>
                    <p>
                        Vehicle Number-${bus.Bus_No.toUpperCase()}<br>
                        Rating - ${bus.Rating.toFixed(1)} / 5.0  (${bus.No_Of_Ratings})<br>
                        ${bus.AC_Status}<br>
                        Driver Name-${bus.Driver_Name}<br>
                        <a href="/vehicle/${bus.Bus_ID}"><button type="button" class="btn" id="btn3">Book</button></a>                   
                    </p>
                </div>
            </div>
        </div>`

        rating.innerHTML += ratingCard;
            })

       })
       }

       


    </script>
</body>
</html>